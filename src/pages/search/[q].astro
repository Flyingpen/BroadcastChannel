---
import List from '../../components/list.astro'
import { getChannelInfo } from '../../lib/telegram'

export const getStaticPaths = () => []

const query = Astro.params?.q ? decodeURIComponent(Astro.params.q) : ''

let channel = {
  posts: [],
  seo: {
    title: query ? `Search: ${query}` : 'Search',
    noindex: true,
  },
}

if (query) {
  channel = await getChannelInfo(Astro, {
    q: query,
  })

  channel.seo = {
    title: `Search: ${query}`,
    noindex: true,
  }
}
---

<List channel={channel} />
